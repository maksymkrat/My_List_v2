// <auto-generated/>
#pragma warning disable 1591
#pragma warning disable 0414
#pragma warning disable 0649
#pragma warning disable 0169

namespace My_List_v2.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "D:\C#\Projects\My_List_v2\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "D:\C#\Projects\My_List_v2\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "D:\C#\Projects\My_List_v2\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "D:\C#\Projects\My_List_v2\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "D:\C#\Projects\My_List_v2\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "D:\C#\Projects\My_List_v2\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "D:\C#\Projects\My_List_v2\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "D:\C#\Projects\My_List_v2\_Imports.razor"
using My_List_v2;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "D:\C#\Projects\My_List_v2\_Imports.razor"
using My_List_v2.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "D:\C#\Projects\My_List_v2\_Imports.razor"
using My_List_v2.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "D:\C#\Projects\My_List_v2\_Imports.razor"
using My_List_v2.Models.DeserializeTranslation;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "D:\C#\Projects\My_List_v2\_Imports.razor"
using My_List_v2.Components;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "D:\C#\Projects\My_List_v2\_Imports.razor"
using My_List_v2.Business;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "D:\C#\Projects\My_List_v2\_Imports.razor"
using My_List_v2.Repository;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/vocabulary")]
    public partial class Vocabulary : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
        }
        #pragma warning restore 1998
#nullable restore
#line 54 "D:\C#\Projects\My_List_v2\Pages\Vocabulary.razor"
       

    private List<Word> words = new List<Word>();

    private List<Word> Words
    {
        get => words;
        set
        {
            words = value;
            InvokeAsync(StateHasChanged);
        }
    }

    string newWord;
    string newTranslate;
    Translater translater;
    string wordTranslation;
    string WordForTranslation;
    Confirmation confirmation;
    Word wordToBeDelated;

    private async void AddWord()
    {
        if (!string.IsNullOrWhiteSpace(newWord) && !String.IsNullOrWhiteSpace(newTranslate))
        {
            var result = await _repository.AddWord(new Word()
            {
                WordText = newWord.ToLower(),
                Translation = newTranslate.ToLower()
            });

            newWord = string.Empty;
            newTranslate = string.Empty;
            wordTranslation = string.Empty;
            if (result)
            {
                UpdateWords();
                StateHasChanged();
            }
            else
            {
    // TODO do not add word
            }
        }
    }

    private void TranslateWord()
    {
        if (!string.IsNullOrWhiteSpace(newWord))
        {
            translater = _business.Translate(newWord);
            wordTranslation = translater.Target.Text;
            newTranslate = translater.Target.Text;
            WordForTranslation = translater.Source.Text;
        }
    }

    private void DeleteWord(Word word)
    {
        wordToBeDelated = word;
        confirmation.Show();
    }

    void onConfirm()
    {
        _repository.DeleteWordById(wordToBeDelated.Id);
        confirmation.Hide();
        UpdateWords();
        StateHasChanged();
        wordToBeDelated = null;
    }

    void onCancel()
    {
        confirmation.Hide();
        wordToBeDelated = null;
    }

    private void SayWord(Word word)
    {
        _business.Speech(word.WordText);
    }

    protected override void OnInitialized()
    {
        UpdateWords();
    }

    private async void UpdateWords()
    {
        Words = await _repository.GetAllWords();
        StateHasChanged();
    }







#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IBusinessLogic _business { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IWordRepository _repository { get; set; }
    }
}
#pragma warning restore 1591
